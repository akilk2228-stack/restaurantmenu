<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>‡§ü‡•á‡§¨‡§≤ ‡§∏‡•á ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ï‡§∞‡•á‡§Ç</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{font-family:Arial;background:#f5f5f5;margin:0}
header{background:#b71c1c;color:#fff;padding:15px;text-align:center}
.card{background:#fff;margin:10px;padding:10px;border-radius:8px}
button{background:green;color:#fff;border:none;padding:6px 12px;border-radius:5px}
input{width:95%;padding:8px;margin:5px}
.status{font-weight:bold;color:green}
</style>
</head>

<body>

<header>
üçΩÔ∏è ‡§ü‡•á‡§¨‡§≤ ‡§∏‡•á ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ï‡§∞‡•á‡§Ç  
<br><small id="tableInfo"></small>
</header>

<div class="card">
<input id="name" placeholder="‡§ï‡§∏‡•ç‡§ü‡§Æ‡§∞ ‡§ï‡§æ ‡§®‡§æ‡§Æ">
</div>

<div class="card">
<h3>‡§Æ‡•á‡§®‡•Ç</h3>
<div>‡§™‡§ø‡§ú‡•ç‡§ú‡§æ ‚Çπ250 <button onclick="addItem('Pizza',250)">Add</button></div>
<div>‡§¨‡§∞‡•ç‡§ó‡§∞ ‚Çπ120 <button onclick="addItem('Burger',120)">Add</button></div>
<div>‡§¨‡§ø‡§∞‡§Ø‡§æ‡§®‡•Ä ‚Çπ180 <button onclick="addItem('Biryani',180)">Add</button></div>
</div>

<div class="card">
<h3>‡§Ü‡§™‡§ï‡§æ ‡§ë‡§∞‡•ç‡§°‡§∞</h3>
<div id="items"></div>
<h3>‡§ï‡•Å‡§≤: ‚Çπ<span id="total">0</span></h3>
<button onclick="placeOrder()">‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ï‡§∞‡•á‡§Ç</button>
</div>

<div class="card">
<h3>‡§ë‡§∞‡•ç‡§°‡§∞ ‡§∏‡•ç‡§ü‡•á‡§ü‡§∏</h3>
<div id="orderStatus">‡§ï‡•ã‡§à ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§®‡§π‡•Ä‡§Ç</div>
</div>

<script>
const firebaseConfig = {
  apiKey: "PASTE_YOUR_API_KEY",
  authDomain: "PASTE.firebaseapp.com",
  projectId: "PASTE_PROJECT_ID",
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const urlParams = new URLSearchParams(window.location.search);
const table = urlParams.get('table') || 1;
document.getElementById("tableInfo").innerText = "‡§ü‡•á‡§¨‡§≤ ‡§®‡§Ç‡§¨‡§∞: "+table;

let cart=[], total=0, orderId=null;

function addItem(name,price){
 cart.push({name,price});
 total+=price;
 document.getElementById("total").innerText=total;
 document.getElementById("items").innerHTML+=`${name} ‚Çπ${price}<br>`;
}

function placeOrder(){
 let name=document.getElementById("name").value;
 if(!name || cart.length==0){alert("‡§®‡§æ‡§Æ ‡§î‡§∞ ‡§Ü‡§á‡§ü‡§Æ ‡§ö‡•Å‡§®‡•á‡§Ç");return;}

 db.collection("orders").add({
  customer:name,
  table:table,
  items:cart,
  total:total,
  status:"Pending",
  createdAt:firebase.firestore.FieldValue.serverTimestamp()
 }).then(doc=>{
  orderId=doc.id;
  listenStatus();
  alert("‡§ë‡§∞‡•ç‡§°‡§∞ ‡§≠‡•á‡§ú ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ");
 });
}

function listenStatus(){
 db.collection("orders").doc(orderId)
 .onSnapshot(doc=>{
  let s=doc.data().status;
  document.getElementById("orderStatus").innerHTML =
   "‡§∏‡•ç‡§•‡§ø‡§§‡§ø: <span class='status'>"+s+"</span>";
 });
}
</script>
</body>
</html>
